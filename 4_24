#include <iostream>
using namespace std;

class BaseString
{
protected:
    char* p; int len; int capacity;
public:
    BaseString(char* ptr)
    {
        cout<<"\nBase Constructor 1\n";
        len = strlen(ptr) + 1;
        capacity = 256;
        p = new char[capacity];
        for(int i=0;i<len;i++)
            p[i] = ptr[i];
        p[len] = '\0';
    }
    BaseString(int Capacity = 256)
    {
        cout<<"\nBase Constructor 0\n";
        capacity = Capacity;
        p = new char[capacity];
        len = 0;
    }

    ~BaseString()
    {
        cout<<"\nBase Destructor\n";
        if(p!=NULL)
            delete[] p;
        len = 0;
    }
    int Length() {return len;}
    int Capacity() { return capacity; }
//char* get() {return p;}
    char& operator[](int i) {return p[i];}
    BaseString& operator=(BaseString& s)
    {
        cout<<"\nBase Operator = \n";
        len = s.Length();
        p = new char[s.capacity];
        capacity = s.capacity;
        for(int i=0;i<s.Length();i++)
        {
            p[i] = s[i];
        }
//strcpy(p, s.get());
        p[len-1] = '\0';
        return *this;
    }
    BaseString(BaseString& s)
    {
        cout<<"\nBase Copy Constructor\n";
        len = s.Length();
        p = new char[s.capacity];
        capacity = s.capacity;
        for(int i=0;i<s.Length() - 1;i++)
            p[i] = s[i];
        p[len-1] = '\0';
    }
    virtual void print()
    {
        int i=0;
        while(p[i]!='\0')
        {
            cout<<p[i];i++;
        }
    }
    virtual int BestOfTheBestFunction(char x){
        cout<<"\nBase Class Подсчет пошел = ";
        int k=0, alfa=(int)x,delta;
        if (alfa>=97)
            alfa-=22;
        for(int i=0;i<len;i++)
        {
            delta=(int)(p[i]);
            if (delta>=97)
                delta-=22;
            if (alfa<delta)
                k++;
        }
        return k;
    }
};
class BurBazFoo:public BaseString
{
protected:
    char* p; int len; int capacity;
public:
    BurBazFoo(char* ptr)
    {
        cout<<"\nBurBazFoo Constructor 1\n";
        len = strlen(ptr) + 1;
        capacity = 128;
        p = new char[capacity];
        for(int i=0;i<len;i++)
            p[i] = ptr[i];
        p[len] = '\0';
    }
    BurBazFoo(int Capacity = 128)
    {
        cout<<"\nBurBazFoo Constructor 0\n";
        capacity = Capacity;
        p = new char[capacity];
        len = 0;
    }

    ~BurBazFoo()
    {
        cout<<"\nBurBazFoo Destructor\n";
        if(p!=NULL)
            delete[] p;
        len = 0;
    }
    int Length() {return len;}
    int Capacity() { return capacity; }
//char* get() {return p;}
    char& operator[](int i) {return p[i];}
    BurBazFoo& operator=(BurBazFoo& s)
    {
        cout<<"\nBase Operator = \n";
        len = s.Length();
        p = new char[s.capacity];
        capacity = s.capacity;
        for(int i=0;i<s.Length();i++)
        {
            p[i] = s[i];
        }
//strcpy(p, s.get());
        p[len-1] = '\0';
        return *this;
    }
    BurBazFoo(BurBazFoo& s)
    {
        cout<<"\nBase Copy Constructor\n";
        len = s.Length();
        p = new char[s.capacity];
        capacity = s.capacity;
        for(int i=0;i<s.Length() - 1;i++)
            p[i] = s[i];
        p[len-1] = '\0';
    }
    virtual void print()
    {
        int i=0;
        while(p[i]!='\0')
        {
            cout<<p[i];i++;
        }
    }
    virtual int BestOfTheBestFunction(char x){
        cout<<"\n BurBazFoo Подсчет пошел = ";
        int k=0, alfa=(int)x,delta;
        if (alfa>=97)
            alfa-=22;
        for(int i=0;i<len;i++)
        {
            delta=(int)(p[i]);
            if (delta>=97)
                delta-=22;
            if (alfa<delta)
                k++;
        }
        return k;
    }
};

int main(){
    BaseString str("abcdefgh");
    cout << str.BestOfTheBestFunction('a') << endl;
    BurBazFoo str1("ag3g32vsbr");
    cout << str1.BestOfTheBestFunction('z') << endl;
    return 0;
}
